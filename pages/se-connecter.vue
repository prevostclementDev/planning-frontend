<script setup>
import AuthLogin from "~/components/form/authLogin.vue";
import AuthRegister from "~/components/form/authRegister.vue";
import {navigateTo} from "nuxt/app"

const useAuthStore = useAuth()

useHead(() => ({
  title : 'Authentification'
}))

definePageMeta({
  layout: false,
});

const register = ref(false);

const bottomText = ref({
  title: 'Vous n’avez pas de compte ?',
  action : 'Créer un compte'
})

const form = computed(() => {
  return (register.value) ? AuthRegister : AuthLogin
})

function toggleForm () {
  if ( register.value ) {
    register.value = false
    bottomText.value = {
      title : 'Vous n’avez pas de compte ?',
      action : 'Créer un compte'
    }
  } else {
    register.value = true
    bottomText.value = {
      title : 'Vous avez déjà un compte ?',
      action : 'Se connecter'
    }
  }

}

</script>

<template>
  <div class="login">

    <svg xmlns="http://www.w3.org/2000/svg" width="257" height="220" viewBox="0 0 257 220" fill="none">
      <path d="M241.147 26.0529C242.468 21.4739 253.789 -0.391484 256.5 -4.58387L136.172 -67.2546C133.717 -62.7465 130.377 -58.6559 126.505 -55.4746C114.813 -45.9433 99.6718 -42.0542 85.9235 -35.8899C72.1544 -29.6966 58.4377 -19.4281 55.8312 -4.58388C52.0669 16.9314 73.1107 38.2699 66.1514 58.9771C59.3053 79.283 31.9061 82.5095 15.9306 96.7693C-0.738655 111.627 -2.96969 137.844 4.5966 158.872C8.65471 170.132 14.9783 180.258 23.6179 191.437C42.5093 216.01 75.2559 226.156 104.218 215.147C104.388 215.093 104.579 215.011 104.72 214.937C121.647 208.384 137.226 196.078 143.345 178.978C151.011 157.595 145.345 128.193 164.932 116.665C178.72 108.555 197.063 115.529 211.92 109.592C226.347 103.828 233.564 87.5202 235.833 72.1694C238.101 56.8186 236.859 40.9151 241.218 26.0159L241.147 26.0529Z" fill="#93C0FF"/>
    </svg>
    <svg xmlns="http://www.w3.org/2000/svg" width="233" height="184" viewBox="0 0 233 184" fill="none">
      <path d="M9.85509 196.807C9.85509 196.807 9.87874 196.878 9.90234 196.925H28.8343C26.2849 190.434 23.8771 183.871 21.965 177.167C12.3573 145.913 19.1323 112.463 37.0494 106.396C49.0177 101.982 70.4993 113.903 91.674 105.121C99.1335 101.651 103.217 94.1443 105.979 86.7556C112.211 73.489 112.211 58.8296 113.604 44.5479C113.982 42.5886 114.95 37.466 115.563 36.2621C115.729 35.7428 115.917 35.2234 116.083 34.7749C116.484 33.8779 116.885 32.9809 117.357 32.1311C118.797 29.5108 122.102 25.4269 127.815 20.0211C127.862 19.9739 127.886 19.9503 127.933 19.9267C138.768 12.774 152.767 13.9543 170.117 19.3837C170.306 19.4309 170.471 19.5018 170.613 19.549C170.542 19.5018 170.471 19.4782 170.4 19.431C170.471 19.4782 170.565 19.5018 170.636 19.549C171.746 19.9267 172.124 20.2336 171.463 19.9503C176.089 22.1221 180.504 24.7423 184.847 27.4334C185.839 28.0944 189.474 30.5258 191.221 31.7061C194.691 34.4208 197.807 37.5369 200.569 40.9833C208.689 52.6684 207.792 55.1706 208.17 70.727C208.548 87.8651 207.485 94.3568 204.582 109.96C197.783 142.277 197.288 168.787 218.58 196.005C218.769 196.335 218.982 196.642 219.218 196.925H231.021C232.296 195.462 233.004 193.502 232.579 191.165C231.918 187.082 228.33 184.084 226.347 180.543C220.729 172.54 220.587 171.69 217.967 164.679C212.608 147.423 215.535 133.449 219.17 114.847C222.263 100.329 224.647 85.6697 223.868 70.7743C224.151 58.6879 223.066 46.1295 215.96 35.908C209.917 26.5364 201.135 19.4073 191.599 13.7891C174.767 2.78864 154.136 -2.21585 134.188 0.923761C119.671 3.42601 107.041 15.9136 100.762 28.8026C95.8758 39.1893 96.1118 50.8507 94.8135 62.04C94.0581 67.1625 92.8306 72.2379 91.0365 77.1007C88.5343 82.955 90.0687 81.3262 86.0321 87.7471C85.6071 88.1956 85.1586 88.6205 84.8518 88.9038C84.2616 89.2579 83.6006 89.6356 83.034 89.9188C65.0462 95.0177 58.1296 86.4959 37.0494 88.9982C22.9329 90.4618 11.5783 102.123 6.29054 114.752C-1.75915 129.908 -0.507947 158.471 1.49857 166.45C2.98576 176.884 6.07806 186.964 9.80783 196.784L9.85509 196.807Z" fill="#93C0FF"/>
      <path d="M171.508 19.9741C171.319 19.9033 171.036 19.7616 170.658 19.5728C170.658 19.5728 170.658 19.5728 170.682 19.5728C170.965 19.6908 171.224 19.8325 171.508 19.9741Z" fill="#93C0FF"/>
      <path d="M86.4352 196.925C86.3172 196.807 86.1991 196.689 86.0811 196.548C63.0887 175.231 57.2344 160.643 62.5222 154.552C69.5332 147.518 66.1104 149.288 75.246 147.187C89.1027 146.314 125.338 157.598 138.44 133.803C145.238 122.826 145.899 100.164 146.56 94.0736C148.708 83.4508 152.32 81.1847 154.987 81.1611C157.112 82.5774 159.378 84.4659 161.432 88.7386C161.762 89.6593 162.353 91.2645 162.494 92.0199C164.029 97.3549 163.745 106.797 163.604 116.877C163.108 131.938 160.677 147.046 163.037 162.083C165.185 174.972 171.11 187.082 179.679 196.902H198.139C196.652 193.314 192.498 191.024 189.995 188.073C181.828 179.693 176.068 165.553 175.596 154.741C174.533 138.5 177.744 122.377 177.295 106.136C177.295 97.4493 176.917 88.3609 172.574 80.5945C164.808 67.3515 150.597 62.1581 140.139 75.7317C133.482 83.8522 133.364 94.9234 132.703 104.909C131.192 117.821 130.413 126.013 123.119 132.457C120.239 135.479 107.114 138.17 93.1158 136.211C81.2419 134.511 64.2928 132.504 56.4083 139.681C33.652 155.143 48.2877 180.991 62.9235 196.925H86.3645H86.4352Z" fill="#74A4E6"/>
      <path d="M121.842 196.925C119.883 188.522 120.331 181.298 121.275 179.599C125.524 172.469 126.964 173.461 130.222 173.437C139.523 175.279 146.888 184.627 154.135 196.925H169.81C167.897 193.691 165.796 190.528 164.026 187.294C156.189 174.452 144.055 160.525 127.814 160.478C118.419 160.619 110.44 168.173 107.159 176.553C104.728 183.045 104.869 190.08 105.813 196.925H121.842Z" fill="#38557E"/>
    </svg>

    <div class="form-container">
      <svg xmlns="http://www.w3.org/2000/svg" width="381" height="278" viewBox="0 0 381 278" fill="none">
        <path d="M64.357 188.739C89.9356 194.237 119.023 252.605 143.685 226.622C155.202 211.622 142.945 181.203 141.986 163.089C139.618 144.554 137.236 125.781 141.222 107.292C143.12 96.3022 143.808 84.5932 149.9 74.9182C169.078 45.5315 191.617 55.2635 214.614 73.7726C243.291 92.8667 261.465 129.638 296.695 137.717C318.826 136.615 297.863 77.5219 297.975 62.8834C293.902 38.3776 304.648 -4.95903 336.685 1.3545C348.566 4.93149 357.501 14.1347 366.107 22.604C370.98 27.6185 375.965 32.5072 380.884 37.4952C378.505 39.7207 376.113 41.9231 373.734 44.1486C370.992 46.7054 368.137 49.1729 365.458 51.7858C363.571 53.6369 361.661 55.5014 359.76 57.3294C358.549 58.4852 357.491 59.7995 356.383 61.0808C355.488 60.0567 354.547 59.059 353.583 58.0746C349.08 53.063 341.666 44.9559 337.673 55.0252C331.727 68.7053 338.374 83.1866 342.85 96.2385C345.691 104.725 346.41 113.69 347.36 122.523C353.461 149.494 340.805 186.393 308.515 185.636C301.671 185.38 295.344 182.491 288.91 180.432C278.777 176.744 268.015 174.369 258.747 168.709C244.92 159.544 233.816 146.666 223.855 133.532C212.973 120.557 200.927 93.1841 180.22 102.017C172.978 112.044 179.537 128.514 178.536 140.372C179.368 162.709 184.047 184.469 188.441 206.269C189.426 222.338 188.812 240.493 178.345 253.629C166.794 266.159 151.486 277.122 133.84 277.313C123.261 278.523 115.341 271.197 108.966 263.724C97.2849 251.607 86.603 238.179 72.867 228.317C65.4163 223.736 54.913 216.939 48.2409 226.301C41.374 234.144 39.6424 244.3 40.3208 254.427C38.4939 255.044 36.6901 255.648 34.8268 256.256C32.9768 256.886 31.1799 257.61 29.3697 258.31C27.6422 258.993 25.8516 259.621 24.1407 260.387C20.088 262.158 16.0221 263.906 11.9861 265.76C8.50825 267.355 5.03039 268.95 1.55255 270.545C-4.67733 228.89 12.7995 175.974 64.3669 188.702L64.357 188.739Z" fill="#FDE767"/>
      </svg>
      <svg xmlns="http://www.w3.org/2000/svg" width="231" height="206" viewBox="0 0 231 206" fill="none">
        <path d="M112.007 205.962C112.007 205.962 -1.99872 207.03 0.235762 99.7684C2.24691 3.51418 83.7727 34.8625 76.7111 99.1338C72.3268 139.069 136.646 126.065 138.319 53.6C140.089 -23.844 238.509 -14.0002 230.353 70.3576C222.198 154.715 171.485 203.691 112.007 205.962Z" fill="#A51313"/>
      </svg>

      <div class="layoutForm">
        <component :is="form"></component>

        <a href="" @click.prevent="toggleForm" class="rm-underline">{{ bottomText.title }} <span>{{ bottomText.action }}</span></a>
      </div>

    </div>
    
  </div>
</template>

<style scoped lang="scss">
.login {
  width: 100%;
  min-height: 100vh;
  @include flex();
  @include bgColor(light1);
  position: relative;

  & > svg {
    position: absolute;

    &:first-child {
      top: 0;
      right: 0;
      transform: translate(-50%);

    }

    &:nth-child(2) {
      bottom: 0;
      left: 0;
      transform: translate(50%);

    }

  }

  h1  {
    margin-bottom: 1.6rem;

  }

  .form-container {
    width: fit-content;
    height: fit-content;
    position: relative;

    svg {
      position: absolute;
      z-index: 1;

      &:first-child {
        top: 0;
        left: 0;
        transform: translate(-75%,20%);

      }

      &:nth-child(2) {
        bottom: 0;
        right: 0;
        transform: translate(60%,20%);

      }

    }

    .layoutForm {
      position: relative;
      z-index: 2;
      padding: 3.2rem;
      border-radius: 40px;
      @include effect(blur);
      min-width: 500px;

      & > a {
        display: block;
        text-align: center;
        width: 100%;

      }

    }

  }

}
</style>